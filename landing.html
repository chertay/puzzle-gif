<!DOCTYPE html>
<html>
<link rel="import" href="bower_components/x-gif/dist/x-gif.html"/>
  <head>
    <meta charset="utf-8">
    <title>Gif Puzzler</title>
    <link rel="stylesheet" type="text/css" href="puzzler.css" />
    <link rel="import" href="bower_components/x-gif/dist/x-gif.html"/>
  </head>
  <body>
    <!-- <x-gif src="http://i.imgur.com/RY2vTBQ.gif"></x-gif> -->
    <h1>Shitty Game of Gifs</h1>
    <div class ="flex-grid">
      <div id="a" class="col"></div>
      <div id="b" class="col"></div>
      <div id="c" class="col"></div>
      <div id="d" class="col"></div>
      <div id="e" class="col"></div>
      <div id="f" class="col"></div>
      <div id="g" class="col"></div>
      <div id="h" class="col"></div>
      <div id="i" class="col"></div>
      <div id="j" class="col"></div>
    </div>
    <script src="https://code.jquery.com/jquery-1.12.4.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js" type="text/javascript"></script>
    <script src="js/drag-n-drop.js" type="text/javascript"></script>
    <script type="text/javascript">

        $(document).ready(ddInit());

        (function(){

              var gif = document.createElement('x-gif');
              gif.setAttribute('src','http://i.giphy.com/OAXZlshfij9gk.gif');

            var gifs = [];
            for(var i = 0; i < 10; i++) {
              gifs[i] = gif.cloneNode();
            }

            var sortables = document.querySelectorAll('.col');

            // HACK: Wait for the gif to be loaded and for the frames to be initialized within <x-gif>:
            setTimeout(function(){
                var images = [];
                for ( var i = 0; i < 10; i++) {
                  images[i] = gifs[i].controller.playback.element.querySelectorAll('.frame');
                }
                Object.keys(sortables).forEach(function(sq,i){
                    sortables[sq].appendChild(gifs[9-i]);
                    for ( var y = i; y > 0; y--) {
                      gifs[i].controller.playback.element.removeChild(images[i][y]);
                    }
                });
            }, 3000);

        })();

    </script>
  </body>
</html>
